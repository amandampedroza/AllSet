<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Geral</title>
    <link rel="stylesheet" href="../css/gerente.css">
    <link rel="website icon" type="png" href="../assets/img/logoAllSet.png"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../js/sessao.js"></script>
</head>
<body>
    <nav class="sidebar">
        <div class="side_container">
            <div class="side_titulo">
                <span>AllSet</span>
            </div>
            <div class="side_perfil">
                <div class="foto_perfil">
                    <img src="https://www.elhombre.com.br/wp-content/uploads/2023/06/jon-hamm-1494357063.jpg" alt="">
                </div>
                <span class="boas_vindas_span">Bem-vindo de volta, <br> <span class="nome_usuario" id="b_usuario">Marcos</span></span>
            </div>
            <div class="side_topicos">
                <ul class="side_menu">
                    <li class="section_active"><i>üìä</i> Dashboard</li>
                    <li onclick="irParaFunc()"><i>üíª</i> Funcion√°rios</li>
                    <li onclick="irParaAlertas()"><i>üîî</i> Alertas</li>
                    <div class="dividir_side"></div>
                    <li><i>‚ùì</i> <a href="https://grupo05.atlassian.net/servicedesk/customer/portal/1" class="helpdesk" target=‚Äù_blank‚Äù>Ajuda</a></li>
                    <li><i>üö™</i> Sair</li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="main_content">
        <div class="nav_main">
            <div class="buscar_carro">
                <div id="menu-bar" class="fas fa-bars"></div>
                <span>Painel Geral</span>
            </div>
            <div class="selecionar_carro">
                <div class="data_hora">
                    <span>üìÖ 29/03/2025</span>
                </div>
            </div>
        </div>
        <div class="kpi_grid">
            <div class="grid_cards">
                <div class="topo_kpi">
                    <span>Total Carros Monitorados</span>
                    <div class="icone_kpi">üñ•Ô∏è</div>
                </div>
                <div class="meio_kpi">
                    <span>200</span>
                </div>
                <div class="fim_kpi">
                    <span class="metrica_kpi">120</span>
                    <span>Comparado a 80 h√° 1h</span>
                </div>
            </div>
            <div class="grid_cards">
                <div class="topo_kpi">
                    <span>Ocorr√™ncias ativas</span>
                    <div class="icone_kpi">üö®</div>
                </div>
                <div class="meio_kpi">
                    <span>30</span>
                </div>
                <div class="fim_kpi">
                    <span class="metrica_kpi">2</span>
                    <span>Comparado a 32 h√° 1h</span>
                </div>
            </div>
            <div class="grid_cards">
                <div class="topo_kpi">
                    <span>Componente com Mais Ocorr√™ncia</span>
                    <div class="icone_kpi">üíø</div>
                </div>
                <div class="meio_kpi">
                    <span>CPU</span>
                </div>
                <div class="fim_kpi">
                    <span class="metrica_kpi3">20</span>
                    <span>Ocorr√™ncias relatadas</span>
                </div>
            </div>
            <div class="grid_cards">
                <div class="topo_kpi">
                    <span>Funcion√°rios Ativos</span>
                    <div class="icone_kpi">üö®</div>
                </div>
                <div class="meio_kpi">
                    <span>23</span>
                </div>
                <div class="fim_kpi">
                    <span class="metrica_kpi">10</span>
                    <span>Comparado a 13 h√° 1h</span>
                </div>
            </div>
        </div>
        <div class="dashboard_mesclado">
            <span>Desempenho dos Carros</span>
            <canvas id="myChart3"></canvas>
        </div>

        <div class="alertas_section">
            <div class="top_alerta">
                <div class="titulo_alerta">√öltimos Alertas</div>
                <div class="ver_alertas">Ver todos os alertas <span>‚Üí</span></div>
            </div>
            <table class="tabela_alertas">
                <thead>
                    <tr>
                        <th>Lote</th>
                        <th>M√©trica</th>
                        <th>Ocorr√™ncias</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>001</td>
                        <td>CPU</td>
                        <td>10</td>
                        <td>Cr√≠tico</td>
                    </tr>
                    <tr>
                        <td>002</td>
                        <td>RAM</td>
                        <td>15</td>
                        <td>M√©dio</td>
                    </tr>
                    <tr>
                        <td>003</td>
                        <td>DISCO</td>
                        <td>10</td>
                        <td class="alerta_crit">Cr√≠tico</td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
    
</body>
</html>

<script>

function irParaAlertas(){
    window.location.href="alertaGerente.html"
}
function irParaFunc(){
    window.location.href="funcionarios.html"
}

criarGraficoTaxaSaude()

function criarGraficoTaxaSaude() {
    const ctx = document.getElementById('myChart3').getContext('2d');

    const labels = ['28 Mar', '29 Mar', '30 Mar', '31 Mar', '01 Abr', '02 Abr', '03 Abr', '04 Abr', '05 Abr', '06 Abr'];
    
    // Dados tendenciosos: sa√∫de come√ßa alta e despenca nos √∫ltimos dias
    const dadosTaxaSaude = [38.2, 20.5, 41.3, 68.1, 17.8, 27.4, 16.2, 14.5, 11.2, 79.7];

    const data = {
        labels: labels,
        datasets: [{
            label: 'Taxa de Sa√∫de dos Carros (%)',
            data: dadosTaxaSaude,
            fill: false,
            borderColor: '#00bc8c',
            backgroundColor: '#00bc8c',
            tension: 0.3,
            pointStyle: 'circle',
            pointRadius: 5,
            pointHoverRadius: 7
        }]
    };

    const config = {
        type: 'line',
        data: data,
        options: {
            plugins: {
                legend: {
                    display: true,
                    labels: {
                        color: '#fff',
                        font: {
                            size: 14
                        }
                    }
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            return `${context.dataset.label}: ${context.raw.toFixed(1)}%`;
                        }
                    }
                }
            },
            scales: {
                x: {
                    ticks: {
                        color: '#fff'
                    },
                    grid: {
                        color: 'rgba(255,255,255,0.1)'
                    }
                },
                y: {
                    beginAtZero: false,
                    min: 0,
                    max: 100,
                    ticks: {
                        color: '#fff',
                        callback: function(value) {
                            return value + '%';
                        }
                    },
                    grid: {
                        color: 'rgba(255,255,255,0.1)'
                    }
                }
            },
            responsive: true,
            maintainAspectRatio: false
        }
    };

    new Chart(ctx, config);
}

let menu = document.querySelector('#menu-bar');
let navbar = document.querySelector('.sidebar');


menu.onclick = () =>{
	
	menu.classList.toggle('fa-times');
	navbar.classList.toggle('active');
    menu.classList.add('fa-times');
	
}
	
window.onscroll = () =>{
	
	menu.classList.remove('fa-times');
	navbar.classList.remove('active');
	
}

</script>